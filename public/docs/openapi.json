{
  "openapi": "3.0.3",
  "info": {
    "title": "Tinder Clone API",
    "version": "1.0.0"
  },
  "servers": [
    { "url": "/" }
  ],
  "paths": {
    "/api/people": {
      "get": {
        "summary": "List people",
        "parameters": [
          {"in":"query","name":"min_age","schema":{"type":"integer"}},
          {"in":"query","name":"max_age","schema":{"type":"integer"}},
          {"in":"query","name":"max_distance","schema":{"type":"integer"}},
          {"in":"query","name":"per_page","schema":{"type":"integer","minimum":1,"maximum":100}}
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/PaginatedPeople"}
              }
            }
          }
        }
      }
    },
    "/api/likes": {
      "get": {
        "summary": "List likes",
        "parameters": [
          {"in":"query","name":"user_id","schema":{"type":"integer","default":1}},
          {"in":"query","name":"status","schema":{"type":"string","enum":["like","dislike"]}},
          {"in":"query","name":"per_page","schema":{"type":"integer","minimum":1,"maximum":100}}
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/PaginatedLikes"}
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create or update like",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "people_id": {"type": "integer", "default": 3},
                  "status": {"type": "string","enum":["like","dislike"]},
                  "user_id": {"type": "integer", "default":1}
                },
                "required": ["people_id","status"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/Like"}
              }
            }
          }
        }
      }
    },
    "/api/likes/rewind": {
      "post": {
        "summary": "Rewind last like/dislike",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {"type": "object", "properties": {"user_id": {"type": "integer", "default":1}}}
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/RewindResponse"}
              }
            }
          },
          "404": {"description": "Not Found"}
        }
      }
    }
  }
  ,
  "components": {
    "schemas": {
      "Like": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "user_id": {"type": "integer"},
          "people_id": {"type": "integer"},
          "status": {"type": "string", "enum": ["like", "dislike"]},
          "created_at": {"type": "string", "format": "date-time"},
          "updated_at": {"type": "string", "format": "date-time"}
        }
      },
      "People": {
        "type": "object",
        "properties": {
          "id": {"type": "string","example": "op2"},
          "name": {"type": "string","example": "Mia"},
          "age": {"type": "integer","example": 27},
          "bio": {"type": "string","example": "Designer"},
          "distance": {"type": "integer","example": 12},
          "photos": {"type": "array", "items": {"type": "string", "format": "uri"}}
        }
      },
      "PaginatedPeople": {
        "type": "object",
        "properties": {
          "current_page": {"type": "integer"},
          "data": {"type": "array", "items": {"$ref": "#/components/schemas/People"}},
          "per_page": {"type": "integer"},
          "total": {"type": "integer"}
        }
      }
      ,
      "PaginatedLikes": {
        "type": "object",
        "properties": {
          "current_page": {"type": "integer"},
          "data": {"type": "array", "items": {"$ref": "#/components/schemas/Like"}},
          "per_page": {"type": "integer"},
          "total": {"type": "integer"}
        }
      },
      "RewindResponse": {
        "type": "object",
        "properties": {
          "rewind": {
            "type": "object",
            "properties": {
              "user_id": {"type": "integer"},
              "people_id": {"type": "integer"},
              "previous_status": {"type": "string", "enum": ["like", "dislike"]}
            }
          }
        }
      }
    }
  }
}
